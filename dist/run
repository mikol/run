#!/usr/bin/env node

// run v0.0.5 (2018-02-25T02:46:59.077Z)
// https://github.com/mikol/run
// http://creativecommons.org/licenses/by-sa/4.0/

'use strict';

var Runner = require('./runner.js');
var runner = new Runner();

runner.on('error', function (error) {
  console.error(error);
  process.exit(1);
});

runner.on('exit', function (code) {
  process.exit(code);
});

runner.on('list', function (scripts) {
  console.log(runner.appName + ': ' + runner.moduleRoot + ' scripts:');
  Object.keys(scripts).forEach(function (name) {
    return console.log('  ' + name + ':\n    ' + scripts[name]);
  });
  process.exit();
});

runner.on('run', function (spec) {
  console.log();
  console.log('> ' + spec.name + (spec.version ? '@' + spec.version : '') + ' ' + spec.wd);
  console.log('> ' + spec.script);
  console.log();
});

runner.on('signal', function (signal) {
  process.exit(1);
});

runner.run();
